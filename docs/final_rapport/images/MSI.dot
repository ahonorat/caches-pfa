digraph coherence {

    node
        [shape=Mrecord width=1.5];

    subgraph cluster_MSI {

        label="MSI";

        //
        // States (Nodes)
        //

        "MSI::I"
            [label="{I}"];

        "MSI::M"
            [label="{M}"];

        "MSI::S"
            [label="{S}"];

        //
        // Transitions (Edges)
        //

        "MSI::I" -> "MSI::M"
            [label="i_modify()/\lmodify_line(l);\lup_stat(n, i, COHERENCE_BROADCAST);\l"];

        "MSI::I" -> "MSI::S"
            [label="i_read()/\lshare_line(l);\lup_stat(n, i, COHERENCE_BROADCAST);\l"];

        "MSI::M" -> "MSI::S"
            [label="a_read()/\lshare_line(l);\lup_stat(n, i, WRITE_BACK);\l"];

        "MSI::M" -> "MSI::I"
            [label="i_del()/\linvalid_line(l);\lup_stat(n, i, WRITE_BACK);\l"];

        "MSI::M" -> "MSI::I"
            [label="a_modify()/\linvalid_line(l);\lup_stat(n, i, WRITE_BACK);\lup_stat(n, i, COHERENCE_EVINCTION);\l"];

        "MSI::S" -> "MSI::M"
            [label="i_modify()/\lmodify_line(l);\lup_stat(n, i, COHERENCE_BROADCAST);\l"];

        "MSI::S" -> "MSI::I"
            [label="a_modify()/\linvalid_line(l);\lup_stat(n, i, COHERENCE_EVINCTION);\l"];

        "MSI::S" -> "MSI::I"
            [label="i_del()/\linvalid_line(l);\l"];
    }
}
